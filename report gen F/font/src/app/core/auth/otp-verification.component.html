<div class="otp-container">
  <div class="otp-form">
    <div class="otp-header">
      <div class="otp-icon">
        <mat-icon>security</mat-icon>
      </div>
      <h2>Verify Your Identity</h2>
      <p *ngIf="email" class="email-info">
        We've sent a 6-digit verification code to <strong>{{ email }}</strong>
      </p>
      <p class="instruction">Please enter the code below to complete your login:</p>
    </div>

    <form [formGroup]="otpForm" (ngSubmit)="onSubmit()" class="otp-form-content">
      <mat-form-field appearance="outline">
        <mat-label>Verification Code</mat-label>
        <input 
          matInput 
          formControlName="otpCode" 
          maxlength="6"
          placeholder="123456"
          autocomplete="one-time-code"
        />
        <mat-icon matSuffix>vpn_key</mat-icon>
        <mat-error *ngIf="otpForm.get('otpCode')?.invalid && otpForm.get('otpCode')?.touched">
          Please enter the 6-digit verification code
        </mat-error>
      </mat-form-field>

      <button 
        mat-raised-button 
        color="primary" 
        type="submit" 
        class="verify-button"
        [disabled]="isSubmitting || otpForm.invalid">
        {{ isSubmitting ? 'Verifying...' : 'Verify Code' }}
      </button>
      
      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>
      
      <div *ngIf="success" class="success-message">
        {{ success }}
      </div>
    </form>

    <div class="actions">
      <button 
        mat-stroked-button 
        type="button" 
        (click)="resendOtp()"
        [disabled]="loading || isSubmitting"
        class="resend-button">
        {{ loading ? 'Sending...' : 'Resend Code' }}
      </button>
      
      <button 
        mat-button 
        type="button" 
        (click)="goBackToLogin()"
        [disabled]="isSubmitting"
        class="back-button">
        Back to Login
      </button>
    </div>

    <div class="help-text">
      <p>Didn't receive the code? Check your spam folder or try resending the code.</p>
    </div>
  </div>
</div>
